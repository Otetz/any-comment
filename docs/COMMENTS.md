# Комментарии

Оглавление
----------

* [GET /comments/ — Показать все Комментарии](#get-comments--Показать-все-Комментарии)
* [POST /comments/ — Создать новый Комментарий](#post-comments--Создать-новый-Комментарий)
* [GET /comments/{comment_id} – Получить информацио о Комментарии](#get-commentscomment_id--Получить-информацио-о-Комментарии)
* [PUT /comments/{comment_id} — Изменить информацио о Комментарии](#put-commentscomment_id--Изменить-информацио-о-Комментарии)
* [DELETE /comments/{comment_id} — Удалить Комментарий](#delete-commentscomment_id--Удалить-Комментарии)
* [GET /comments/{comment_id}/first_level — Комментарии первого уровня](#get-commentscomment_idfirst_level--Комментарии-первого-уровня)

## GET /comments/ — Показать все Комментарии
**Аргументы**: Нет  
**Возвращает**: Список всех Комментариев

Поддерживается [пагинация](./OPTIONS.md#Пагинация).

**Пример запроса**:
```bash
curl -X GET http://HOSTNAME/api/1.0/comments/
```

**Пример ответа**:
```json
{
  "pages": 1,
  "total": 2,
  "response": [
    {
      "userid": 325,
      "datetime": "2017-06-20T19:03:23.727040+03:00",
      "deleted": false,
      "entityid": 429699,
      "commentid": 428954,
      "text": "Например, определение функции, которое использует сопоставление с образцом, …",
      "parentid": 427420
    },
    {
      "userid": 324,
      "datetime": "2017-06-20T19:03:23.727040+03:00",
      "deleted": false,
      "entityid": 429700,
      "commentid": 428955,
      "text": "Erlang является декларативным языком программирования, который скорее …",
      "parentid": 427421
    }
  ]
}
```

## POST /comments/ — Создать новый Комментарий
**Аргументы**: Нет  
**Возвращает**: Запись о новом Комментарии, либо Возникшие ошибки

**Пример запроса**:
```bash
curl -X POST http://HOSTNAME/api/1.0/comments/ \
  -H 'content-type: application/json' \
  -d '{"userid": 324, "text": "Erlang является декларативным языком программирования, который скорее …", "parentid": 427421}'
```
**Пример ответа**:
```json
{
  "parentid": 427421,
  "entityid": 533030,
  "text": "Erlang является декларативным языком программирования, который скорее …",
  "datetime": "2017-06-23T23:37:54.340601+03:00",
  "userid": 324,
  "deleted": false,
  "commentid": 531997
}
```

## GET /comments/{comment_id} – Получить информацио о Комментарии
**Аргументы**: 
- *comment_id* (int) Идентификатор комментария

**Возвращает**: Запись с информацией о запрошенном Комментарии либо Сообщение об ощибке

**Пример запроса**:
```bash
curl -X GET http://HOSTNAME/api/1.0/comments/531997
```
**Пример успешного ответа**:
```json
{
  "response":{
    "parentid": 427421,
    "entityid": 533030,
    "text": "Erlang является декларативным языком программирования, который скорее …",
    "datetime": "2017-06-23T23:37:54.340601+03:00",
    "userid": 324,
    "deleted": false,
    "commentid": 531997
  }
}
```
**Пример с сообщением об ошибке**:
```json
{
  "errors":[
    {
      "comment_id": 477,
      "error": "Комментарий не найден"
    }
  ]
}
```

## PUT /comments/{comment_id} — Изменить информацио о Комментарии
**Аргументы**: 
- *comment_id* (int) Идентификатор комментария  

**Возвращает**: Пустой словарь `{}` при успехе, иначе Возникшие ошибки

**Пример запроса**:
```bash
curl -X PUT http://HOSTNAME/api/1.0/comments/531997 \
  -H 'content-type: application/json' \
  -d '{"text": "Новый текст комментария"}'
```

## DELETE /comments/{comment_id} — Удалить Комментарий
**Аргументы**: 
- *comment_id* (int) Идентификатор Комментария

**Возвращает**: Список комментарии первого уровня вложенности при успехе, иначе Возникшие ошибки. При попытке удаеления ветви возвращает статус **400**.

**Пример запроса**:
```bash
curl -X DELETE http://HOSTNAME/api/1.0/comments/531997
```

## GET /comments/{comment_id}/first_level — Комментарии первого уровня
**Аргументы**: 
- *comment_id* (int) Идентификатор родительского комментария

**Возвращает**: Список Комментариев первого уровня вложенности

Поддерживается [пагинация](./OPTIONS.md#Пагинация).

**Пример запроса**:
```bash
curl -X GET http://HOSTNAME/api/1.0/comments/428954/first_level
```
**Пример ответа**:
```json
{
  "pages": 1,
  "total": 2,
  "response": [
    {
      "entityid": 532842,
      "parentid": 429699,
      "commentid": 531905,
      "userid": 334,
      "deleted": false,
      "text": "Python — высокоуровневый язык программирования общего назначения, ориентированный …",
      "datetime": "2017-06-23T01:02:30.439275+03:00"
    },
    {
      "entityid": 532695,
      "parentid": 429699,
      "commentid": 531858,
      "userid": 333,
      "deleted": false,
      "text": "В наш век информации слишком много, чтобы понять кто прав, а кто лукавит.",
      "datetime": "2017-06-22T22:30:06.871942+03:00"
    }
  ]
}
```
