# Пользователи

Оглавление
----------

* [GET /users/ — Показать всех Пользователей](#get-users--Показать-всех-Пользователей)
* [POST /users/ — Создать нового Пользователя](#post-users--Создать-нового-Пользователя)
* [GET /users/{user_id} – Получить информацио о Пользователе](#get-usersuser_id--Получить-информацио-о-Пользователе)
* [PUT /users/{user_id} — Изменить информацио о Пользователе](#put-usersuser_id--Изменить-информацио-о-Пользователе)
* [DELETE /users/{user_id} — Удалить Пользователя](#delete-usersuser_id--Удалить-Пользователя)
* [GET /users/{user_id}/first_level — Комментарии первого уровня](#get-usersuser_idfirst_level--Комментарии-первого-уровня)
* [GET /users/{user_id}/descendants — Все комментарии](#get-usersuser_iddescendants--Все-комментарии)

## GET /users/ — Показать всех Пользователей
**Аргументы**: Нет  
**Возвращает**: Список всех Пользователей

Поддерживается [пагинация](./OPTIONS.md#Пагинация).

**Пример запроса**:
```bash
curl -X GET http://HOSTNAME/api/1.0/users/
```

**Пример ответа**:
```json
{
  "pages": 1,
  "total": 2,
  "response": [
    {
      "entityid": 320988,
      "name": "Яна Рогова",
      "userid": 316
    },
    {
      "entityid": 320989,
      "name": "Александра Щербакова",
      "userid": 317
    }
  ]
}
```

## POST /users/ — Создать нового Пользователя
**Аргументы**: Нет  
**Возвращает**: Запись о новом Пользователе, либо Возникшие ошибки

**Пример запроса**:
```bash
curl -X POST http://HOSTNAME/api/1.0/users/ \
  -H 'content-type: application/json' \
  -d '{"name": "Александра Щербакова"}'
```
**Пример ответа**:
```json
{
  "userid": 318,
  "entityid": 532585,
  "name": "Александра Щербакова"
}
```

## GET /users/{user_id} – Получить информацио о Пользователе
**Аргументы**: 
- *user_id* (int) Идентификатор пользователя  

**Возвращает**: Запись с информацией о запрошенном Пользователе либо Сообщение об ощибке

**Пример запроса**:
```bash
curl -X GET http://HOSTNAME/api/1.0/users/346
```
**Пример успешного ответа**:
```json
{
  "response": {
    "userid": 316,
    "entityid": 532585,
    "name": "Яна Рогова"
  }
}
```
**Пример с сообщением об ошибке**:
```json
{
  "errors": [
    {
      "error": "Пользователь не найден",
      "user_id": 316
    }
  ]
}
```

## PUT /users/{user_id} — Изменить информацио о Пользователе
**Аргументы**: 
- *user_id* (int) Идентификатор пользователя  

**Возвращает**:  Пустой словарь `{}` при успехе, иначе Возникшие ошибки

**Пример запроса**:
```bash
curl -X PUT http://HOSTNAME/api/1.0/users/346 \
  -H 'content-type: application/json' \
  -d '{"name": "Александра Щербакова"}'
```

## DELETE /users/{user_id} — Удалить Пользователя
**Аргументы**: 
- *user_id* (int) Идентификатор пользователя  

**Возвращает**:  Пустой словарь `{}` при успехе, иначе Возникшие ошибки

**Пример запроса**:
```bash
curl -X DELETE http://HOSTNAME/api/1.0/users/340
```

## GET /users/{user_id}/first_level — Комментарии первого уровня
**Аргументы**: 
- *user_id* (int) Идентификатор пользователя

**Возвращает**: Список Комментариев первого уровня вложенности

Поддерживается [пагинация](./OPTIONS.md#Пагинация).

**Пример запроса**:
```bash
curl -X GET http://HOSTNAME/api/1.0/users/428935/first_level
```
**Пример ответа**:
```json
{
  "pages": 1,
  "total": 2,
  "response": [
    {
      "entityid": 532842,
      "parentid": 429699,
      "commentid": 531905,
      "userid": 334,
      "deleted": false,
      "text": "Python — высокоуровневый язык программирования общего назначения, ориентированный …",
      "datetime": "2017-06-23T01:02:30.439275+03:00"
    },
    {
      "entityid": 532695,
      "parentid": 429699,
      "commentid": 531858,
      "userid": 333,
      "deleted": false,
      "text": "В наш век информации слишком много, чтобы понять кто прав, а кто лукавит.",
      "datetime": "2017-06-22T22:30:06.871942+03:00"
    }
  ]
}
```

## GET /users/{user_id}/descendants — Все комментарии

**Аргументы**: 
- *user_id* (int) Идентификатор пользователя

**Возвращает**: Список всех комментариев к пользователю в JSON-стриме

**Пример запроса**:
```bash
curl -X GET http://HOSTNAME/api/1.0/users/320231/descendants \
  -H 'Connection: Keep-Alive'
```
**Пример ответа**:
```json
[
{
  "deleted": false,
  "userid": 326,
  "entityid": 321089,
  "commentid": 320344,
  "text": "Erlang является декларативным языком программирования, который скорее используется …",
  "datetime": 1497973918,
  "parentid": 321044
}
,
{
  "deleted": false,
  "userid": 334,
  "entityid": 321156,
  "commentid": 320411,
  "text": "Свой синтаксис и некоторые концепции Erlang унаследовал от языка логического …",
  "datetime": 1497973919,
  "parentid": 321089
}
]
```
