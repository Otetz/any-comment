# Посты

Оглавление
----------

* [GET /posts/ — Показать все Посты](#get-posts--Показать-все-Посты)
* [POST /posts/ — Создать новый Пост](#post-posts--Создать-новый-Пост)
* [GET /posts/{post_id} – Получить информацио о Посте](#get-postspost_id--Получить-информацио-о-Посте)
* [PUT /posts/{post_id} — Изменить информацио о Посте](#put-postspost_id--Изменить-информацио-о-Посте)
* [DELETE /posts/{post_id} — Удалить Пост](#delete-postspost_id--Удалить-Пост)
* [GET /posts/{post_id}/first_level — Комментарии первого уровня](#get-postspost_idfirst_level--Комментарии-первого-уровня)

## GET /posts/ — Показать все Посты
**Аргументы**: Нет  
**Возвращает**: Список всех Постов

Поддерживается [пагинация](./OPTIONS.md#Пагинация).

**Пример запроса**:
```bash
curl -X GET http://HOSTNAME/api/1.0/posts/
```

**Пример ответа**:
```json
{
  "pages": 1,
  "total": 2,
  "response": [
    {
      "entityid": 321008,
      "title": "Erlang был целенаправленно разработан для …",
      "postid": 391,
      "text": "Полнотиповое программирование может поддерживаться на …",
      "userid": 324
    },
    {
      "entityid": 321009,
      "title": "REPL — форма организации простой интерактивной …",
      "postid": 392,
      "text": "Erlang — функциональный язык программирования с сильной …",
      "userid": 318
    }
  ]
}
```

## POST /posts/ — Создать новый Пост
**Аргументы**: Нет  
**Возвращает**: Запись о новом Посте, либо Возникшие ошибки

**Пример запроса**:
```bash
curl -X POST http://HOSTNAME/api/1.0/posts/ \
  -H 'content-type: application/json' \
  -d '{"userid": 319, "title": "Erlang был целенаправленно разработан для …", "text": "Erlang — функциональный язык программирования с сильной …"}'
```
**Пример ответа**:
```json
{
  "entityid":532814,
  "title":"Erlang был целенаправленно разработан для …",
  "postid":477,
  "text":"Erlang — функциональный язык программирования с сильной …",
  "userid":319
}
```

## GET /posts/{post_id} – Получить информацио о Посте
**Аргументы**: 
- *post_id* (int) Идентификатор поста  

**Возвращает**: Запись с информацией о запрошенном Посте либо Сообщение об ощибке

**Пример запроса**:
```bash
curl -X GET http://HOSTNAME/api/1.0/posts/477
```
**Пример успешного ответа**:
```json
{
  "response": {
    "entityid": 532814,
    "title": "Erlang был целенаправленно разработан для …",
    "postid": 477,
    "text": "Erlang — функциональный язык программирования с сильной …",
    "userid": 319
  }
}
```
**Пример с сообщением об ошибке**:
```json
{
  "errors": [
    {
      "error": "Пост не найден",
      "post_id": 477
    }
  ]
}
```

## PUT /posts/{post_id} — Изменить информацио о Посте
**Аргументы**: 
- *post_id* (int) Идентификатор поста  

**Возвращает**:  Пустой словарь `{}` при успехе, иначе Возникшие ошибки

**Пример запроса**:
```bash
curl -X PUT http://HOSTNAME/api/1.0/posts/477 \
  -H 'content-type: application/json' \
  -d '{"title": "Erlang был целенаправленно разработан для …"}'
```

## DELETE /posts/{post_id} — Удалить Пост
**Аргументы**: 
- *post_id* (int) Идентификатор поста

**Возвращает**:  Пустой словарь `{}` при успехе, иначе Возникшие ошибки

**Пример запроса**:
```bash
curl -X DELETE http://HOSTNAME/api/1.0/posts/477
```

## GET /posts/{post_id}/first_level — Комментарии первого уровня
**Аргументы**: 
- *post_id* (int) Идентификатор поста

**Возвращает**: Список Комментариев первого уровня вложенности

Поддерживается [пагинация](./OPTIONS.md#Пагинация).

**Пример запроса**:
```bash
curl -X GET http://HOSTNAME/api/1.0/posts/428951/first_level
```
**Пример ответа**:
```json
{
  "pages": 1,
  "total": 2,
  "response": [
    {
      "entityid": 532842,
      "parentid": 429699,
      "commentid": 531905,
      "userid": 334,
      "deleted": false,
      "text": "Python — высокоуровневый язык программирования общего назначения, ориентированный …",
      "datetime": "2017-06-23T01:02:30.439275+03:00"
    },
    {
      "entityid": 532695,
      "parentid": 429699,
      "commentid": 531858,
      "userid": 333,
      "deleted": false,
      "text": "В наш век информации слишком много, чтобы понять кто прав, а кто лукавит.",
      "datetime": "2017-06-22T22:30:06.871942+03:00"
    }
  ]
}
```
